**정의**

- 절두체 컬링은 카메라의 시야(FOV) 내에 있지 않은 오브젝트는 랜더링 하지 않고 범위에 들어오면 랜더링하는 기법이다

**절두체**

- 절두체는 총 6개의 평면으로 이뤄져 있는데 근평면, 원평면, 좌평면, 우평면, 상평면, 하평면으로 이뤄져있다. 이때 6개의 평면에 포함되는 영역만을 렌더링 하게 되므로 나머지 영역에 포함된 폴리곤들은 Direct3D의 DrawPrimitive() 함수에게 부담을 주게 되는데 이때, 6개의 평면 내부와 외부를 판단하기 위해서 평면의 방정식이라는 수학적 도구를 사용한다.
- 투영행렬을 게산할 때 범위의 모양이 삼각뿔의 머리를 잘라놓은것 같다고 해서 절두체라 부름

**평면의 방정식**

$$
정의 : ax + by + cz + d = 0
$$

위의 방정식에서 $a,b,c$는 평면의 방향을 나타내는 법선 벡터이고

$d$는 평면과 원점간의 거리를 나타내는 값이다.

즉 이 수식을 만족하는 $(x, y, z)$좌표값들은 모두 이 평면 위에 있는 점들이게 된다.

![image.png](image%205.png)

위의 사진은 평면 위의 3개의 점으로 생성된 평면 방정식이다

3개의 점 $v0, v1, v2$로부터 $v`$와 $v``$를 만들고, 이들 두개의 백터를 외적연산 하면

직교하는 벡터 $N = (a, b, c)$가 나온다

이렇게 얻어진 벡터 $N= (a, b, c)$가 평면 방정식의 법선 벡터이다.

$d$ 값은 $v0, v1, v2$중의 어느 하나의 값을 평면의 방정식에 대입해 미지수  $d$의 값을 얻어내면 된다

$$
ex) ax1 + by1 + cz1 + d = 0
$$

$$
d = -(ax1 + by 1 + cz1)
$$

### **평면 방정식의 성질**

평면에 방향이 있다는 것은 어떠한 점이 평면의 앞에 있는지, 뒤에있는지를 판단할 수 있다는 얘기다.

**평면방정식의 연산 결과**

| 결과값 | 의미 |
| --- | --- |
| ax + by + cz + d = 0 | 점이 평면 위에 있다. |
| ax + by + cz + d > 0 | 점이 평면 앞에  있다. |
| ax + by + cz + d < 0 | 점이 평면 뒤에 있다. |

결과값의 부호는 평면을 기준으로 점의 위치를 나타내고, 결과값이 나타내는 숫자는 점과 평면간의 거리를 나타낸다.

이러한 성질을 이용하여 절두체 내부에 점이 포함되는지를 판단할 수 있고 얼마나 떨어져 있는지도 알 수 있다.

**절두체 컬링 원리**

절두체 내부에 점이 포함되는지 판단하기 위해서는 6개의 평면 방정식에 점의 좌표를 대입해 모든 평면 방정식의 결과값이 양수이면 절두체 내부에 포함되어 있는 것이다.

![image.png](image%206.png)

따라서 안에 있는 점(오브젝트)들은 랜더링하지 않음으로써 메모리를 효과적으로 절약할 수 있다