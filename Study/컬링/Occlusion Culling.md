오클루전 컬링은 다른 오브젝트에 가려져 카메라에 보이지 않는 오브젝트의 랜더링을 비활성화 하는 기능이다.
3D컴퓨터 그래픽스에서는 대부분의 경우 카메라에서 먼 오브젝트가 먼저 그려지고, 더 가까이 있는 오브젝트를 차례차례 덮어서 쓰기 때문에  이런 일이 저절로 발생하지는 않는다. 
오클루전 컬링은 절두체 컬링([[Frustum Culling]])과는 다른 기법인데, 절두체 컬링은 카메라의 표시 영역 밖에 있는 오브젝트들의 랜더러를 비활성화 하지만, 오버드로우에 의해 안보이게 된 오브젝트들의 랜더러는  비활성화 하지 않는다.


#### 오클루전 컬링 설정
오클루전 컬링을 사용하기 위해서 몇가지 수동 설정이 필요하다.
우선, 레벨의 지오메트리를 적당한 크기로 분할한다 이때 벽, 건물 등 대형 오브젝트에 의해 가리는 작고 제대로 정의된 영역에 레벨을 배치해야 좋다.
**오클루전을 적용하고자 하는 모든 씬 오브젝트**에는 인스펙터에서 **Occluder Static** 및 **Occludee Static**
태그를 체크하여야 한다.
이때, 주의해야할 점이 있는데 만약 **투명한 유리병같은 오브젝트라 뒤에 있는 오브젝트가 보여야 할 경우**, Occludee Static만 활성화 하여야 한다.

#### 오클루전 컬링 사용방법
오클루전 컬링 작업을 하기 위해서 오클루전 창을 켜야하는데, **Window -> Occlusion Culling**
![[Pasted image 20250701203327.png]]

오클루전 창을 처음 키면
![[Pasted image 20250701203545.png]]
위와 같은 창이 보이는데 Object, Bake 순서로 설명하겠다.
##### 1.Object 탭
![[Pasted image 20250701203913.png]]
씬에 존재하는 Static 오브젝트를 오클루전 컬링 대상으로 등록하고 개별 설정을 조절할 수 있는 곳이다.
- 씬에 있는 모든 Static 오브젝트가 트리 형태로 나열됨
- 체크 박스로 Occluder Static / Occludee Static 을 켜고 끌 수 있다.
- 체크 표시된 항목만 컬링 데이터 생성 시 고려됩니다.

##### 2.Bake 탭
![[Pasted image 20250701204044.png]]
오클루전 컬링 데이터를 Bake하기 위한 주요 파라미터를 설정할 수 있는 탭이다.

| 설정항목                   | 설명                                                                            |
| ---------------------- | ----------------------------------------------------------------------------- |
| **Smallest Occluder**  | 다른 물체를 가리는 오브젝트인 **가리개**로 인식할 최소 박스 크기(미터단위)                                  |
| **Smallest Hole**      | 틈으로 간주할 최소 크기(미터 단위). 이보다 작은 틈은 무시<br>*무시된 틈은 구멍으로 인식되지 않아 뒤쪽 오브젝트가 랜더링되지 않음* |
| **Backface Threshold** | 뒤쪽 면(Backface)으로만 보이는 표면을 컬링 시점에 포함할지 비율(%)                                   |





- 오버드로우?
	오버드로우란 카메라에 더 가까운 오브젝트에 의해 겹쳐진 상황을 말한다
	
	쉽게 설명하기 위해 그림으로 예를 들어보면 배경을 모두 다 그린 후, 사람을 그리기 위해 배경 위에 사람을 그리는 식으로 컴퓨터는 작동하는데, 이때 배경과 사람이 겹치는 부분 즉 같은 위치에 있는 픽셀을 두번 그리는 것이 오버드로우 이다.
- 레벨의 지오메트리?
	- 지오메트리
		**Mesh 즉 3D 모델**이 가지고 있는 형상정보 전체를 가르킨다.
	- 레벨
		씬을 오클루전 컬링용으로 미리 나눠둔 **그룹** 단위이다.
	
	-> 즉 레벨의 지오메트리란 오클루전 컬링을 위해 묶어놓은 **각 그룹에 포함된 모든 메쉬**를 뜻한다.

	- 왜 적당히 나눠야 하는걸까?
		만약 크게 나눠서 방 하나를 하나의 거대한 메쉬로 만든다면 
		**카메라는 전부 보인다와 전부 가려진다 둘중 하나**만 판단이 가능하기에,
		실제론 안**보이는 가구가 가려져야 할 상황에 모든 가구가 한번에 랜더링** 되기때문에 비효율적이다.